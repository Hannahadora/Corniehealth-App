<template>
  <nav class="p-5 flex min-w-full items-center w-full border-b-2 h-14">
    <span
      @click="$router.back()"
      class="
        flex
        items-center
        justify-items-center
        pr-2
        border-r-2
        cursor-pointer
      "
    >
      <arrow-left-icon />
    </span>
    <h2 class="text-xl font-bold ml-3 capitalize">{{ routeName }}</h2>
    <span class="flex items-center justify-center ml-auto">
     <div class="dropdown">
      <settings-icon class="cursor-pointer" />  
      <ul  class="dropdown-menu p-2 bg-white rounded-md w-80 h-auto right-10 absolute -mt-2 z-10 shadow-md hidden">
        <li class="border-b border-primary cursor-pointer mb-3" @click="$router.push('org-info')">
          <cornie-btn class="font-semibold rounded-full mb-5 border-primary border-2 pl-4 pr-4 p-1 hover:bg-primary hover:text-white mt-2 w-full text-primary">
            <span class="inline-flex justify-center"> <settings-icon class="mr-2 mt-0.5"/> Go to all settings</span>
          </cornie-btn>
        </li>
        <li @click="$router.push('org-info')" class="cursor-pointer mb-3 list-none items-center flex text-sm font-semibold text-gray-700 hover:bg-gray-100 hover:text-gray-900 cursor-pointer my-1 -m-2 p-5 py-2">
          <span class="flex item-center"><org-icon/><p class="ml-2"> Organization Information</p></span>
        </li>
        <li @click="$router.push('contact-info')" class="cursor-pointer mb-3 list-none items-center flex text-sm font-semibold text-gray-700 hover:bg-gray-100 hover:text-gray-900 cursor-pointer my-1 -m-2 p-5 py-2">
            <div class="flex"> <contact-icon/> <p class="ml-2">Contact Information</p></div>
        </li>
        <li @click="$router.push('org-hierarchy')" class="cursor-pointer mb-3 list-none items-center flex text-sm font-semibold text-gray-700 hover:bg-gray-100 hover:text-gray-900 cursor-pointer my-1 -m-2 p-5 py-2">
            <div class="flex"> <hierarchy-icon/> <p class="ml-2">Organization Hierarchy</p> </div>
        </li>
        <li @click="$router.push('practitioners')" class="cursor-pointer mb-3 list-none items-center flex text-sm font-semibold text-gray-700 hover:bg-gray-100 hover:text-gray-900 cursor-pointer my-1 -m-2 p-5 py-2">
            <div class="flex"> <practitioner-icon/> <p class="ml-2">Practicioner</p> </div>
        </li>
        <li class="cursor-pointer list-none items-center flex text-sm mb-3 font-semibold text-gray-700 hover:bg-gray-100 hover:text-gray-900 cursor-pointer my-1 -m-2 p-5 py-2">
            <div class="flex"> <approval-icon/> <p class="ml-2">Approval</p> </div>
        </li>
      </ul>
      </div>
    </span>
    <span class="flex items-center justify-center ml-5">
     <div class="dropdown">
      <bell-icon class="cursor-pointer" />
        <ul  class="dropdown-menu p-2 bg-white rounded-md w-80 h-auto right-10 absolute -mt-2 z-10 shadow-md hidden">
          <li class="border-b border-primary grid grid-cols-2 m-3 pb-2 gap-20 col-span-full cursor-pointer list-none">
             <p class="text-1xl font-bold">Notifications</p>
            <p class="text-blue-400 text-xs -right-7 relative">Mark as read</p>
          </li>
          <li class="cursor-pointer list-none items-center -mb-5 -m-2 p-5">
            <p class="text-danger uppercase text-sm font-semibold"> New (1)</p>
          </li>
          <li class=" flex cursor-pointer list-none cursor-pointer my-1 -m-2 p-5 py-2">
            <div class="float-left">
             <p class="font-bold text-sm"> Pending Approvals</p>
             <p class="text-xs"> You have 5 pending approvals. Click to <br> view and take action.</p>
            </div>
             <p class="text-gray-300 text-xs float-right"> 8 Minutes Ago</p>
          </li>
          <li class="cursor-pointer list-none items-center -mb-5 -m-2 p-5">
            <p class="text-gray-500 font-semibold text-sm uppercase"> Earlier</p>
          </li>
          <li class=" flex cursor-pointer list-none cursor-pointer my-1 -m-2 p-5 py-2">
            <div class="float-left">
             <p class="font-bold text-sm"> User Login</p>
             <p class="text-xs"> Logan Paul has accepted the invitations <br> and logged in successfully.</p>
            </div>
             <p class="text-gray-300 text-xs float-right">12 hours Ago</p>
          </li>
          <li class=" flex cursor-pointer list-none cursor-pointer my-1 -m-2 p-5 py-2">
            <div class="float-left">
             <p class="font-bold text-sm">Subscription Notice</p>
             <p class="text-xs"> Your subscription will expire 3rd July 2021 <br> and is set auto renew.</p>
            </div>
             <p class="text-gray-300 text-xs float-right">1 Day Ago</p>
          </li>
          <li class=" flex cursor-pointer list-none cursor-pointer my-1 -m-2 p-5 py-2">
            <div class="float-left">
             <p class="font-bold text-sm">Update Your Contact Information</p>
             <p class="text-xs"> You have not completed your contact <br> information. Click to continue...</p>
            </div>
             <p class="text-gray-300 text-xs float-right">5 Days Ago</p>
          </li>
          
        </ul>
      </div>
    </span>
      <span class="w-10 h-10 relative ml-5">
        <div class="group w-full h-full rounded-full overflow-hidden shadow-inner text-center bg-purple table cursor-pointer">
          <img
            v-if="profilePhoto"
            :src="profilePhoto"
            class="
              object-cover object-center
              w-full
              h-full
              visible
              group-hover:hidden
            "
          />
          <img
            v-else
            src="@/assets/img/placeholder.png"
            class="
              object-cover object-center
              w-full
              h-full
              visible
              group-hover:hidden
            "
          />
          <span>
              <svg xmlns="http://www.w3.org/2000/svg" class="absolute -bottom-10 left-3.5" width="6" height="6" viewBox="0 0 6 6" fill="none">
              <path d="M0 3C0 1.34315 1.34315 0 3 0C4.65685 0 6 1.34315 6 3C6 4.65685 4.65685 6 3 6C1.34315 6 0 4.65685 0 3Z" fill="#35BA83"/>
              <path d="M3 5C1.89543 5 1 4.10457 1 3H-1C-1 5.20914 0.790861 7 3 7V5ZM5 3C5 4.10457 4.10457 5 3 5V7C5.20914 7 7 5.20914 7 3H5ZM3 1C4.10457 1 5 1.89543 5 3H7C7 0.790861 5.20914 -1 3 -1V1ZM3 -1C0.790861 -1 -1 0.790861 -1 3H1C1 1.89543 1.89543 1 3 1V-1Z" fill="white"/>
              </svg>
          </span>
        </div>
      </span>
      <div class="dropdown">
      <span class="font-medium ml-1">{{ name }}</span>
      <span class="ml-1">
        <chevron-down class="cursor-pointer"/>
        <ul  class="dropdown-menu p-2 bg-white rounded-md w-96 h-auto right-10 absolute -mt-2 z-10 shadow-md hidden">
            <li class="float-right mr-1">
              <settings-icon class="mt-0.5 justify-end cursor-pointer" @click="$router.push('org-info')"/>
            </li>
            <li class="list-none -mb-3 mt-2 -m-2 p-5 flex justify-center">
            <span class="w-10 h-10 relative justify-center">
              <div class="group w-10 flex justify-center h-full mb-4 rounded-full overflow-hidden shadow-inner text-center bg-purple table cursor-pointer">
                <img v-if="profilePhoto" :src="profilePhoto" class="object-cover object-center w-full h-full visible group-hover:hidden"/>
                <img v-else src="@/assets/img/placeholder.png" class="object-cover object-center w-fullh-full visible group-hover:hidden"/>
                <span>
                    <svg xmlns="http://www.w3.org/2000/svg" class="absolute top-8 left-8" width="6" height="6" viewBox="0 0 6 6" fill="none">
                    <path d="M0 3C0 1.34315 1.34315 0 3 0C4.65685 0 6 1.34315 6 3C6 4.65685 4.65685 6 3 6C1.34315 6 0 4.65685 0 3Z" fill="#35BA83"/>
                    <path d="M3 5C1.89543 5 1 4.10457 1 3H-1C-1 5.20914 0.790861 7 3 7V5ZM5 3C5 4.10457 4.10457 5 3 5V7C5.20914 7 7 5.20914 7 3H5ZM3 1C4.10457 1 5 1.89543 5 3H7C7 0.790861 5.20914 -1 3 -1V1ZM3 -1C0.790861 -1 -1 0.790861 -1 3H1C1 1.89543 1.89543 1 3 1V-1Z" fill="white"/>
                    </svg>
                </span>
              </div>
              </span>
            </li>
            <li class="justify-content border-b border-primary pb-5">
              <p class="3xl text-center font-extrabold">{{ name }}</p>
              <p class="2xl text-center text-gray-600 font-bold">{{ user.email }}</p>
              <p class="2xl text-center text-yellow-400 font-bold">Surgeon</p>
            </li>
            <li class="cursor-pointer list-none items-center -mb-4  -m-2 p-5">
              <span class="text-gray-600 font-bold text-xs uppercase"> Domains</span>
            </li>
            <li class="flex w-full">
              <div class="w-full flex space-x-3">
                <div class="h-12 w-12 flex-grow-0 flex-shrink-0 rounded-full overflow-hidden shadow">
                  <img class="object-cover w-full h-full" src="@/assets/img/reddignton.png" />
                </div>
                <div class="w-full">
                  <div class="flex items-center justify-between">
                    <h2 class="text-gray-600 text-lg">Reddington Hospitals</h2>
                    <span class="p-2 text-xs font-semibold leading-none text-green-300 bg-green-50 rounded-full flex-shrink-0">Current Domain</span>
                  </div>
                  <a href="#" class="text-gray-400 text-sm">https://www.corniehealth/reddington</a>
                </div>
              </div>
            </li>
            <li class="flex w-full">
              <div class="w-full flex space-x-3">
                <div class="h-12 w-12 flex-grow-0 flex-shrink-0 rounded-full overflow-hidden shadow">
                  <img class="object-cover w-full h-full" src="@/assets/img/evercare.png" />
                </div>
                <div class="w-full">
                  <div class="flex items-center justify-between">
                    <h2 class="text-gray-600 text-lg">Evercare Hospital Lekki</h2>
                    <span class="p-2 text-sm font-semibold leading-none text-danger rounded-full flex-shrink-0">Switch</span>
                  </div>
                  <a href="#" class="text-gray-400 text-sm">https://www.corniehealth/reddington</a>
                </div>
              </div>
            </li>
            <li class="flex w-full">
              <div class="w-full flex space-x-3">
                <div class="h-12 w-12 flex-grow-0 flex-shrink-0 rounded-full overflow-hidden shadow">
                  <img class="object-cover w-full h-full" src="@/assets/img/nicholas.png" />
                </div>
                <div class="w-full">
                  <div class="flex items-center justify-between">
                    <h2 class="text-gray-600 text-lg">St. Nicholas Hospital</h2>
                    <span class="p-2 text-sm font-semibold leading-none text-danger rounded-full flex-shrink-0">Switch</span>
                  </div>
                  <a href="#" class="text-gray-400 text-sm">https://www.corniehealth/reddington</a>
                </div>
              </div>
            </li>

           <!-- <li class=" flex cursor-pointer list-none cursor-pointer my-1 -m-2 p-5 py-2">
              <div class="grid grid-cols-3">
                <div >
                <img src="@/assets/img/reddignton.png" class="object-cover object-center w-fullh-full visible group-hover:hidden"/>
                </div>
                <div class="relative right-9">
                  <div class="">
                    <h2 class="justify-start text-gray-600 text-xs">Reddington Hospitals 
                      <span class="relative items-center justify-center px-2 py-1 mr-2 text-xs font-bold leading-none text-green-300 bg-green-100 rounded-full">Current Domain</span>
                    </h2>
                    <a href="#" class="text-gray-300 text-xs">https://www.corniehealth/reddington</a>
                  </div>
                </div>
              </div>
            </li>
            <li class=" flex cursor-pointer list-none cursor-pointer my-1 -m-2 p-5 py-2">
              <div class="grid grid-cols-3">
                <div >
                <img src="@/assets/img/evercare.png" class="object-cover object-center w-fullh-full visible group-hover:hidden"/>
                </div>
                <div class="relative right-9">
                  <div class="">
                    <h2 class="justify-start text-gray-600 text-">Evercare Hospital Lekki 
                      <span class="text-danger text-sm font-bold">Switch</span>
                    </h2>
                    <a href="#" class="text-gray-300 text-xs">https://www.corniehealth/evercare-lekki</a>
                  </div>
                </div>
              </div>
            </li>
            <li class=" flex cursor-pointer list-none cursor-pointer my-1 -m-2 p-5 py-2 border-primary">
              <div class="grid grid-cols-3">
                <div >
                <img src="@/assets/img/nicholas.png" class="object-cover object-center w-fullh-full visible group-hover:hidden"/>
                </div>
                <div class="relative right-9">
                  <div class="">
                    <h2 class="justify-start text-gray-600 text-xs">St. Nicholas Hospital
                    </h2>
                      <span class="text-danger text-sm font-bold">Switch</span>
                  </div>
                    <a href="#" class="text-gray-300 text-xs">https://www.corniehealth/st-nicholas-hospital</a>
                </div>
              </div>
            </li>-->
            <li class="flex w-full border-t border-primary">
              <div class="w-full flex space-x-3">
                  <p class="text-xs font-extrabold">Manage My Subscription</p>
                  <span class="-right-7 relative cursor-pointer" @click="$router.push('/Login')">
                    <svg xmlns="http://www.w3.org/2000/svg" width="18" height="19" viewBox="0 0 18 19" fill="none">
                    <path d="M11.08 13.09L13.67 10.5H4V8.5H13.67L11.08 5.91L12.5 4.5L17.5 9.5L12.5 14.5L11.08 13.09ZM16 0.5C16.5304 0.5 17.0391 0.710714 17.4142 1.08579C17.7893 1.46086 18 1.96957 18 2.5V7.17L16 5.17V2.5H2V16.5H16V13.83L18 11.83V16.5C18 17.0304 17.7893 17.5391 17.4142 17.9142C17.0391 18.2893 16.5304 18.5 16 18.5H2C1.46957 18.5 0.960859 18.2893 0.585786 17.9142C0.210714 17.5391 0 17.0304 0 16.5V2.5C0 1.39 0.89 0.5 2 0.5H16Z" fill="#6F6C93"/>
                    </svg>
                  </span>
              </div>
            </li>
          </ul>
      </span>
    </div>
  </nav>
</template>
<script lang="ts">
import { Options, Vue } from "vue-class-component";
import ArrowLeftIcon from "./icons/arrowleft.vue";
import SettingsIcon from "./icons/settings.vue";
import BellIcon from "./icons/bell.vue";
import ChevronDown from "./icons/chevrondown.vue";
import { namespace } from "vuex-class";
import User from "@/types/user";
import OrgIcon from "@/components/icons/org.vue";
import ContactIcon from "@/components/icons/contactinfo.vue";
import HierarchyIcon from "@/components/icons/hierarchy.vue";
import PractitionerIcon from "@/components/icons/practitioner.vue";
import ApprovalIcon from "@/components/icons/approval.vue";

const account = namespace("user");
@Options({
  components: {
    ArrowLeftIcon,
    ChevronDown,
    SettingsIcon,
    BellIcon,
    OrgIcon,
    ContactIcon,
    HierarchyIcon,
    PractitionerIcon,
    ApprovalIcon,
  },
})
export default class NavBar extends Vue {
  get routeName() {
    return this.$route.name;
  }

  @account.State
  user!: User;

  get profilePhoto() {
    return this.user.photo;
  }

  get name() {
    if (!this.user.id) return "";
    const lastName = this.user.lname;
    const firstInitials = this.user.fname.charAt(0).toUpperCase();
    let middleInitials = this.user.mname?.charAt(0)?.toUpperCase() || "";
    middleInitials = middleInitials ? `${middleInitials}.` : "";
    return `${lastName} ${firstInitials}. ${middleInitials}`;
  }
}
</script>
<style>
.dropdown:hover .dropdown-menu {
  display: block;
}

</style>
